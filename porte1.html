<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>Visionneuse</title>

<style>
    body {
        margin: 0;
        padding: 0;
        overflow: hidden;
        background: url("https://blog-eyc.pages.dev/vid/fire/fire.gif") center/cover no-repeat;
        font-family: Arial, sans-serif;
    }

    /* Bouton retour */
    .back-button {
        position: absolute;
        top: 20px;
        left: 20px;
        font-size: 40px;
        color: red;
        cursor: pointer;
        user-select: none;
        z-index: 1000;
    }

    /* Gif cliquable */
    .open-viewer {
        position: absolute;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 260px;        /* augmenté */
        height: auto;
        cursor: pointer;
        z-index: 50;
    }

    /* Boite de pensée */
    .thought-box {
        position: absolute;
        bottom: 140px;
        left: 50%;
        transform: translateX(-50%);
        background: rgba(255, 150, 220, 0.85);
        border: 3px solid pink;
        padding: 20px;
        width: 380px;
        font-size: 20px;
        border-radius: 10px;
        text-align: center;
        color: white;
        animation: pop 0.3s ease-out;
        z-index: 200;
    }

    @keyframes pop {
        from { transform: scale(0.7) translateX(-50%); opacity: 0; }
        to   { transform: scale(1) translateX(-50%); opacity: 1; }
    }

    /* Overlay visionneuse (sans fond noir) */
    .viewer-overlay {
        position: fixed;
        top: 0; left: 0;
        width: 100%;
        height: 100%;
        display: none;
        justify-content: center;
        align-items: center;
        z-index: 999;
    }

    /* Contenu de la visionneuse */
    .viewer-content {
        position: relative;
        width: 60%;                      /* réduit */
        max-width: 750px;                /* réduit */
        background-image: url("https://img.itch.zone/aW1hZ2UvMjkwMzEwMC8xNzM2NzE1My5wbmc=/original/dK58Rm.png");
        background-size: contain;
        background-repeat: no-repeat;
        background-position: center;
        padding: 60px 40px 60px 40px;
        display: flex;
        gap: 40px;
        pointer-events: auto;
    }

    /* Image dans la visionneuse */
    .viewer-image {
        max-width: 55%;                 /* plus grande */
        margin-left: 50px;              /* plus à droite */
    }

    /* Texte */
    .viewer-text {
        color: white;
        font-size: 24px;
        width: 50%;                     /* plus large */
        margin-left: 30px;              /* plus d'espace */
        margin-top: 20px;
        white-space: pre-line;          /* retour à la ligne */
    }

    /* Flèche droite */
    .arrow-right {
        position: absolute;
        right: -50px;
        top: 50%;
        transform: translateY(-50%);
        font-size: 60px;
        color: red;
        cursor: pointer;
        user-select: none;
    }
</style>
</head>

<body>

    <div class="back-button" onclick="window.location.href='zone2_1.html'">⮜</div>

    <img src="https://media.tenor.com/wgmpvhHPSkkAAAAj/book-trophy-pixel-art.gif"
         class="open-viewer"
         id="openBook">

    <div class="thought-box" id="thought1">Oh tient un livre, dommage que je soit illettré !</div>

    <!-- Visionneuse -->
    <div class="viewer-overlay" id="viewerOverlay">

        <div class="viewer-content" id="viewerContent">

            <img id="viewerImage" class="viewer-image" src="">

            <div id="viewerText" class="viewer-text"></div>

            <div class="arrow-right" id="nextArrow">⮞</div>

        </div>

    </div>

<script>
let images = [
    "https://i.imgur.com/qmbKHzv.png",
    "https://i.imgur.com/xzZ06bS.png"
];

let texts = [
    "On s'en fou\nVraiment c'est nul !",
    "Mais quand même on sais pas"
];

let index = 0;

const overlay = document.getElementById("viewerOverlay");
const content = document.getElementById("viewerContent");

document.getElementById("openBook").addEventListener("click", () => {
    showThought("Espérons qu'il y ai des images !");
    setTimeout(() => {
        overlay.style.display = "flex";
        loadImage();
    }, 600);
});

document.getElementById("nextArrow").addEventListener("click", () => {
    index = (index + 1) % images.length;
    loadImage();
});

/* Fermer si on clique en dehors du PNG */
overlay.addEventListener("click", (e) => {
    if (!content.contains(e.target)) {
        overlay.style.display = "none";
    }
});

function loadImage() {
    document.getElementById("viewerImage").src = images[index];
    document.getElementById("viewerText").textContent = texts[index];
}

/* Système boîte de pensée */
function showThought(txt) {
    let box = document.createElement("div");
    box.className = "thought-box";
    box.textContent = txt;
    document.body.appendChild(box);

    playSound();

    setTimeout(() => box.remove(), 1800);
}

function playSound() {
    let audio = new Audio("https://cdn.pixabay.com/audio/2022/03/15/audio_efea2536c1.mp3");
    audio.volume = 0.3;
    audio.play();
}
</script>

</body>
</html>
